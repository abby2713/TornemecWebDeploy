(()=>{var e={};e.id=260,e.ids=[260],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},371:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var t=a(260),r=a(8203),n=a(5155),i=a.n(n),l=a(7292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(s,o);let c=["",{children:["store",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,5373)),"C:\\Users\\Ideapad\\OneDrive\\Documentos\\GitHub\\Deploy\\TornemecWebDeploy\\src\\app\\store\\page.jsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,2804)),"C:\\Users\\Ideapad\\OneDrive\\Documentos\\GitHub\\Deploy\\TornemecWebDeploy\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\Ideapad\\OneDrive\\Documentos\\GitHub\\Deploy\\TornemecWebDeploy\\src\\app\\store\\page.jsx"],m={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/store/page",pathname:"/store",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2711:(e,s,a)=>{Promise.resolve().then(a.bind(a,5373))},2975:(e,s,a)=>{Promise.resolve().then(a.bind(a,200))},200:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var t=a(5512),r=a(8009);a(5517);var n=a(5636),i=a(8073),l=a(4803);let o=({item:e,onEdit:s,onDelete:a,onAssign:r,onAdd:o,onReport:c})=>{let{id:d,name:m,stock:u,model:p,brand:h,unitprice:x,imageurl:j,codigoitem:g}=e;return(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"imageContainer",children:(0,t.jsx)("img",{src:`https://v14m7300-4000.brs.devtunnels.ms${j}`,alt:m,className:"item-image"})}),(0,t.jsxs)("div",{className:"details",children:[(0,t.jsx)("h3",{className:"title",children:m}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"C\xf3digo:"})," ",g]})," ",(0,t.jsxs)("div",{className:"row",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Stock:"})," ",u]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Precio Unitario:"})," ",(0,t.jsxs)("span",{className:"price",children:[x," Bs"]})]})]}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Modelo:"})," ",p]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Marca:"})," ",h]})]}),(0,t.jsxs)("div",{className:"form-buttons-grid",children:[(0,t.jsxs)("div",{className:"button-row",children:[(0,t.jsxs)("button",{className:"button add-button",onClick:()=>o(e),children:[(0,t.jsx)(i.g,{icon:l.QLR})," A\xf1adir"]}),(0,t.jsxs)("button",{className:"button edit-button",onClick:()=>s(d),children:[(0,t.jsx)(i.g,{icon:l.MT7})," Editar"]})]}),(0,t.jsxs)("div",{className:"button-row",children:[(0,t.jsxs)("button",{className:"button assign-button",onClick:()=>r(d),children:[(0,t.jsx)(i.g,{icon:l.nWR})," Asignar"]}),(0,t.jsxs)("button",{className:"button delete-button",onClick:()=>a(d),children:[(0,t.jsx)(i.g,{icon:l.BeE})," Eliminar"]})]}),(0,t.jsx)("div",{className:"button-row",children:(0,t.jsxs)("button",{className:"button report-button",onClick:()=>c(d),children:[(0,t.jsx)(i.g,{icon:l.h8M})," Reportes"]})})]})]}),(0,t.jsxs)("div",{className:"qr-container",children:[(0,t.jsx)(n.X,{id:`qr-${d}`,value:g||`${d}`,size:128,style:{display:"none"}}),(0,t.jsxs)("button",{className:"button qr-button",onClick:()=>{let e=document.getElementById(`qr-${d}`).toDataURL("image/png"),s=document.createElement("a");s.href=e,s.download=`item-${g||m}-qr.png`,s.click()},title:"Descargar c\xf3digo QR",children:[(0,t.jsx)(i.g,{icon:l.Yop})," Descargar QR"]})]})]})};var c=a(62);function d({onClose:e,onItemRegistered:s}){let[a,n]=(0,r.useState)({name:"",codigoitem:"",stock:"0",model:"",size:"",serialNumber:"",unitprice:"",categoryId:"",storeId:"",branchId:"",brand:"",images:[]}),[i,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[m,u]=(0,r.useState)([]),[p,h]=(0,r.useState)(!0),x=e=>{let{name:s,value:a}=e.target;n(e=>({...e,[s]:""===a?["stock","categoryId","storeId","branchId"].includes(s)?null:"":a})),"branchId"===s&&(j(a),n(e=>({...e,storeId:""})))},j=async e=>{try{let{status:s,data:a}=await (0,c.Dv)(e);200===s&&u(a)}catch(e){console.error("Error al cargar los almacenes:",e)}},g=e=>{n(s=>({...s,images:s.images.filter((s,a)=>a!==e)}))},b=async t=>{t.preventDefault();let r={...a,model:a.model?.trim()||"Sin Modelo",brand:a.brand?.trim()||"Sin Marca",size:a.size?.trim()||"N/A",serialNumber:a.serialNumber?.trim()||"000000"},n=new FormData;Object.entries(r).forEach(([e,s])=>{"images"!==e&&null!==s&&n.append(e,s)}),a.images.forEach(e=>{n.append("images",e.file)});try{let a=await (0,c.wE)(n);201===a.status?(alert("Registro exitoso"),s(),e()):alert("Hubo un error al registrar la m\xe1quina.")}catch(e){console.error("Error al enviar los datos:",e),alert("Hubo un error al enviar los datos.")}};return(0,t.jsxs)("div",{className:"create-item-container",children:[(0,t.jsx)("h2",{className:"form-title",children:"REGISTRO DE ITEM"}),(0,t.jsxs)("form",{className:"form",onSubmit:b,children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{className:"form-label",children:["Nombre: ",(0,t.jsx)("span",{className:"required",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"name",value:a.name,onChange:x,className:"form-input",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{className:"form-label",children:["C\xf3digo del \xcdtem: ",(0,t.jsx)("span",{className:"required",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"codigoitem",value:a.codigoitem,onChange:x,className:"form-input",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{className:"form-label",children:["Precio Unitario: ",(0,t.jsx)("span",{className:"required",children:"*"})]}),(0,t.jsx)("input",{type:"number",name:"unitprice",value:a.unitprice,onChange:x,className:"form-input",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Modelo:"}),(0,t.jsx)("input",{type:"text",name:"model",value:a.model,onChange:x,className:"form-input"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Marca:"}),(0,t.jsx)("input",{type:"text",name:"brand",value:a.brand,onChange:x,className:"form-input"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Tama\xf1o:"}),(0,t.jsx)("input",{type:"text",name:"size",value:a.size,onChange:x,className:"form-input"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"N\xfamero de serie:"}),(0,t.jsx)("input",{type:"text",name:"serialNumber",value:a.serialNumber,onChange:x,className:"form-input"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{className:"form-label",children:["Categor\xeda: ",(0,t.jsx)("span",{className:"required",children:"*"})]}),(0,t.jsxs)("select",{name:"categoryId",value:a.categoryId,onChange:x,className:"form-select",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Selecciona una categor\xeda"}),i.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{className:"form-label",children:["Sucursales: ",(0,t.jsx)("span",{className:"required",children:"*"})]}),(0,t.jsxs)("select",{name:"branchId",value:a.branchId,onChange:x,className:"form-select",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Selecciona una sucursal"}),o.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),a.branchId&&(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{className:"form-label",children:["Almac\xe9n: ",(0,t.jsx)("span",{className:"required",children:"*"})]}),(0,t.jsxs)("select",{name:"storeId",value:a.storeId,onChange:x,className:"form-select",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Selecciona un almac\xe9n"}),m.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Im\xe1genes:"}),(0,t.jsx)("input",{type:"file",name:"images",className:"form-input",accept:"image/*",onChange:e=>{let s=Array.from(e.target.files).map(e=>({file:e,url:URL.createObjectURL(e)}));n(e=>({...e,images:[...e.images,...s]}))},multiple:!0})]}),(0,t.jsx)("div",{className:"image-preview-container",children:a.images.map((e,s)=>(0,t.jsxs)("div",{className:"image-preview-item",children:[(0,t.jsx)("img",{src:e.url,alt:`Preview ${s}`,className:"image-preview"}),(0,t.jsx)("button",{type:"button",className:"remove-image-button",onClick:()=>g(s),children:"X"})]},s))}),(0,t.jsxs)("div",{className:"form-buttons",children:[(0,t.jsx)("button",{type:"submit",className:"form-button form-button-primary",children:"Registrar"}),(0,t.jsx)("button",{type:"button",className:"form-button form-button-secondary",onClick:e,children:"Cancelar"})]})]})]})}function m({itemId:e,onClose:s,onItemUpdated:a}){let[n,i]=(0,r.useState)({name:"",model:"",size:"",serialNumber:"",unitprice:"",categoryId:"",storeId:"",branchId:"",brand:"",codigoitem:""}),[l,o]=(0,r.useState)([]),[d,m]=(0,r.useState)([]),[u,p]=(0,r.useState)([]),[h,x]=(0,r.useState)([]),[j,g]=(0,r.useState)([]),[b,v]=(0,r.useState)([]),N=e=>{let{name:s,value:a}=e.target;("codigoitem"!==s||/^[a-zA-Z0-9\-]*$/.test(a))&&(i(e=>({...e,[s]:a})),"branchId"===s&&i(e=>({...e,storeId:""})))},f=e=>{g(s=>[...s,e]),x(s=>s.filter(s=>s!==e))},y=e=>{v(s=>s.filter((s,a)=>a!==e))},C=async t=>{t.preventDefault();let r={...n,model:n.model?.trim()||"Sin Modelo",brand:n.brand?.trim()||"Sin Marca",size:n.size?.trim()||"N/A",serialNumber:n.serialNumber?.trim()||"000000"},i=new FormData;for(let e in r)i.append(e,r[e]);b.forEach(e=>i.append("images",e)),i.append("imagesToDelete",JSON.stringify(j));try{let t=await (0,c.fk)(e,i);200===t.status||204===t.status?(alert("Actualizaci\xf3n exitosa"),a(),s()):alert("Error al actualizar el \xedtem: "+t.statusText)}catch(e){console.error("Error al actualizar los datos:",e),alert("Hubo un error al actualizar los datos.")}},S={name:"Nombre",model:"Modelo",size:"Tama\xf1o",serialNumber:"N\xfamero de serie",unitprice:"Precio unitario",brand:"Marca"};return(0,t.jsxs)("div",{className:"create-item-container",children:[(0,t.jsx)("h2",{className:"form-title",children:"ACTUALIZAR ITEM"}),(0,t.jsxs)("form",{className:"form",onSubmit:C,encType:"multipart/form-data",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{className:"form-label",children:["C\xf3digo del \xedtem: ",(0,t.jsx)("span",{className:"required",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"codigoitem",value:n.codigoitem,onChange:N,className:"form-input",required:!0})]}),Object.entries(n).map(([e,s])=>["categoryId","storeId","branchId","codigoitem"].includes(e)?null:(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{className:"form-label",children:[S[e]||e,":"]}),(0,t.jsx)("input",{type:"text",name:e,value:s,onChange:N,className:"form-input"})]},e)),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Categor\xeda:"}),(0,t.jsxs)("select",{name:"categoryId",value:n.categoryId,onChange:N,className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Seleccione una categor\xeda"}),d.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Sucursal:"}),(0,t.jsxs)("select",{name:"branchId",value:n.branchId,onChange:N,className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Seleccione una sucursal"}),l.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Almac\xe9n:"}),(0,t.jsxs)("select",{name:"storeId",value:n.storeId,onChange:N,className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Seleccione un almac\xe9n"}),u.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Im\xe1genes actuales:"}),(0,t.jsx)("div",{className:"image-preview-container",children:h.map(e=>(0,t.jsxs)("div",{className:"image-preview-item",children:[(0,t.jsx)("img",{src:`https://v14m7300-4000.brs.devtunnels.ms${e}`,alt:"img",className:"preview-img",width:"100"}),(0,t.jsx)("button",{type:"button",className:"remove-image-button",onClick:()=>f(e),children:"X"})]},e))})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Agregar nuevas im\xe1genes:"}),(0,t.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>v(s=>[...s,...Array.from(e.target.files)])}),(0,t.jsx)("div",{className:"image-preview-container",children:b.map((e,s)=>(0,t.jsxs)("div",{className:"image-preview-item",children:[(0,t.jsx)("img",{src:URL.createObjectURL(e),alt:`preview-${s}`,className:"preview-img",width:"100"}),(0,t.jsx)("button",{type:"button",className:"remove-image-button",onClick:()=>y(s),children:"X"})]},s))})]}),(0,t.jsxs)("div",{className:"form-buttons",children:[(0,t.jsx)("button",{type:"submit",className:"form-button form-button-primary",children:"Actualizar"}),(0,t.jsx)("button",{type:"button",className:"form-button form-button-secondary",onClick:s,children:"Cancelar"})]})]})]})}function u({itemId:e,onClose:s,onItemDeleted:a}){let r=async t=>{t.preventDefault();try{let t=await (0,c.LD)(e);200===t.status||204===t.status?(alert("Registro Eliminado"),a(),s()):alert("Error al eliminar la m\xe1quina. C\xf3digo de estado: "+t.status)}catch(e){console.error("Error al eliminar la m\xe1quina:",e),alert("Error al eliminar la m\xe1quina. Ver la consola para m\xe1s detalles.")}};return(0,t.jsxs)("div",{className:"create-item-container",children:[(0,t.jsx)("h2",{className:"form-title",children:"\xbfDesea Eliminar el Registro?"}),(0,t.jsx)("form",{className:"form",onSubmit:r,children:(0,t.jsxs)("div",{className:"form-buttons",children:[(0,t.jsx)("button",{type:"submit",className:"form-button form-button-primary",children:"Aceptar"}),(0,t.jsx)("button",{type:"button",className:"form-button form-button-secondary",onClick:s,children:"Cancelar"})]})})]})}function p({item:e,onClose:s,onItemAssigned:a}){let[n,i]=(0,r.useState)([]),[l,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(1),[m,u]=(0,r.useState)(""),p=async()=>{if(!l){alert("Selecciona un empleado.");return}if(c<=0){alert("La cantidad debe ser mayor a 0.");return}if(c>e.stock){alert("No hay suficiente stock disponible.");return}let t={userid:parseInt(l),observation:m||`Asignaci\xf3n de ${c} unidad(es) de ${e.name}`,items:[{itemid:e.id,quantity:c}]};try{let e=await fetch("https://v14m7300-4000.brs.devtunnels.ms/api/transactions/assign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(e.ok)alert("\xcdtem asignado correctamente ✅"),a(),s();else{let s=await e.json();console.error(s),alert("Error al asignar el \xedtem.")}}catch(e){console.error(e),alert("Error de conexi\xf3n con el servidor.")}};return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Asignaci\xf3n de \xcdtem"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"15px",marginBottom:"15px"},children:[(0,t.jsx)("img",{src:`https://v14m7300-4000.brs.devtunnels.ms${e.imageurl}`,alt:e.name,style:{width:"100px",borderRadius:"8px"}}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Nombre:"})," ",e.name]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Stock:"})," ",e.stock]})]})]}),(0,t.jsx)("label",{children:"Cantidad a asignar:"}),(0,t.jsx)("input",{type:"number",min:"1",max:e.stock,value:c,onChange:e=>d(Number(e.target.value)),style:{width:"100%",padding:"8px",marginBottom:"12px"}}),(0,t.jsx)("label",{children:"Selecciona un empleado:"}),(0,t.jsxs)("select",{value:l,onChange:e=>o(e.target.value),style:{width:"100%",padding:"8px",marginBottom:"12px"},children:[(0,t.jsx)("option",{value:"",children:"-- Seleccionar empleado --"}),n.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," ",e.lastname]},e.id))]}),(0,t.jsx)("label",{children:"Observaci\xf3n (opcional):"}),(0,t.jsx)("textarea",{value:m,onChange:e=>u(e.target.value),placeholder:"Ej. Entregado para uso en taller",rows:"3",style:{width:"100%",padding:"8px",marginBottom:"15px",resize:"vertical"}}),(0,t.jsx)("button",{onClick:p,style:{marginRight:"10px"},children:"Confirmar Asignaci\xf3n"}),(0,t.jsx)("button",{onClick:s,children:"Cancelar"})]})}function h({item:e,onClose:s,onItemUpdated:a}){let[n,i]=(0,r.useState)(1),[l,o]=(0,r.useState)(""),[c,d]=(0,r.useState)([]),[m,u]=(0,r.useState)(1);sessionStorage.getItem("userId");let p=async()=>{if(n<=0){alert("La cantidad debe ser mayor a 0.");return}let t=sessionStorage.getItem("userId");if(!t){alert("Error: No se pudo obtener el usuario logueado.");return}let r={userid:Number(t),observation:l||`Ingreso de ${n} unidad(es) de ${e.name}`,items:[{itemid:e.id,quantity:n}]};try{let e=await fetch("https://v14m7300-4000.brs.devtunnels.ms/api/transactions/entry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(e.ok)alert("Stock a\xf1adido correctamente ✅"),a(),s();else{let s=await e.json();console.error(s),alert("Error al a\xf1adir stock.")}}catch(e){console.error(e),alert("Error de conexi\xf3n con el servidor.")}},h=Math.ceil(c.length/5),x=c.slice((m-1)*5,5*m);return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Ingreso de Stock"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"15px",marginBottom:"15px"},children:[(0,t.jsx)("img",{src:`https://v14m7300-4000.brs.devtunnels.ms${e.imageurl}`,alt:e.name,style:{width:"100px",borderRadius:"8px"}}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Nombre:"})," ",e.name]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Stock actual:"})," ",e.stock]})]})]}),(0,t.jsx)("label",{children:"Cantidad a ingresar:"}),(0,t.jsx)("input",{type:"number",min:"1",value:n,onChange:e=>i(Number(e.target.value)),style:{width:"100%",padding:"8px",marginBottom:"12px"}}),(0,t.jsx)("label",{children:"Observaci\xf3n (opcional):"}),(0,t.jsx)("textarea",{value:l,onChange:e=>o(e.target.value),placeholder:"Ej. Reposici\xf3n por compra",rows:"3",style:{width:"100%",padding:"8px",marginBottom:"15px",resize:"vertical"}}),(0,t.jsx)("button",{onClick:p,style:{marginRight:"10px"},children:"Confirmar Ingreso"}),(0,t.jsx)("button",{onClick:s,children:"Cancelar"}),(0,t.jsx)("h4",{style:{marginTop:"30px"},children:"Historial de entradas"}),0===c.length?(0,t.jsx)("p",{children:"No hay movimientos de entrada registrados."}):(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"10px"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{borderBottom:"2px solid #ccc",backgroundColor:"#f2f2f2"},children:[(0,t.jsx)("th",{style:{padding:"8px",textAlign:"left"},children:"\uD83D\uDCC5 Fecha"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"center"},children:"\uD83D\uDCE6 Cantidad"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"left"},children:"\uD83D\uDCDD Descripci\xf3n"})]})}),(0,t.jsx)("tbody",{children:x.map(e=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #e0e0e0"},children:[(0,t.jsx)("td",{style:{padding:"6px"},children:new Date(e.createdat).toLocaleString("es-BO",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}),(0,t.jsx)("td",{style:{padding:"6px",textAlign:"center",fontWeight:"bold"},children:e.quantity}),(0,t.jsx)("td",{style:{padding:"6px"},children:e.description})]},e.id))}),h>1&&(0,t.jsxs)("div",{className:"pagination",children:[(0,t.jsx)("button",{disabled:1===m,onClick:()=>u(m-1),children:"◀"}),Array.from({length:h},(e,s)=>(0,t.jsx)("button",{className:m===s+1?"active":"",onClick:()=>u(s+1),children:s+1},s+1)),(0,t.jsx)("button",{disabled:m===h,onClick:()=>u(m+1),children:"▶"})]})]})]})}function x({itemId:e,onClose:s}){let[a,n]=(0,r.useState)([]),[i,l]=(0,r.useState)(!0);return(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("button",{className:"close-button",onClick:s,children:"\xd7"}),(0,t.jsxs)("h2",{children:["Reporte de Movimientos del \xcdtem #",e]}),i?(0,t.jsx)("p",{children:"Cargando..."}):0===a.length?(0,t.jsx)("p",{children:"No se encontraron movimientos."}):(0,t.jsxs)("table",{style:{width:"100%",marginTop:"1rem",borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{backgroundColor:"#f4f4f4",borderBottom:"1px solid #ccc"},children:[(0,t.jsx)("th",{style:{padding:"8px"},children:"Fecha"}),(0,t.jsx)("th",{style:{padding:"8px"},children:"Tipo"}),(0,t.jsx)("th",{style:{padding:"8px"},children:"Cantidad"}),(0,t.jsx)("th",{style:{padding:"8px"},children:"Total acumulado"}),(0,t.jsx)("th",{style:{padding:"8px"},children:"Descripci\xf3n"}),(0,t.jsx)("th",{style:{padding:"8px"},children:"Usuario"})]})}),(0,t.jsx)("tbody",{children:a.map((e,s)=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,t.jsx)("td",{style:{padding:"6px"},children:new Date(e.transactiondate).toLocaleString("es-BO",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,t.jsx)("td",{style:{padding:"6px"},children:e.movementtype}),(0,t.jsx)("td",{style:{padding:"6px",textAlign:"center"},children:e.quantity}),(0,t.jsx)("td",{style:{padding:"6px",textAlign:"center",fontWeight:"bold"},children:e.current_total}),(0,t.jsx)("td",{style:{padding:"6px"},children:e.description}),(0,t.jsx)("td",{style:{padding:"6px"},children:e.user_name})]},s))})]})]})})}a(5881),a(1678);var j=a(8721);function g(){let[e,s]=(0,r.useState)(!1),[a,n]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),[f,y]=(0,r.useState)(null),[C,S]=(0,r.useState)(0),[w,I]=(0,r.useState)([]),[k,D]=(0,r.useState)(!0),[E,q]=(0,r.useState)(null),[A,R]=(0,r.useState)(""),[T,P]=(0,r.useState)(!1),[M,_]=(0,r.useState)(null),[z,O]=(0,r.useState)(!1),L=async()=>{try{let e=await (0,c.JS)();if(e.data){let s=e.data.sort((e,s)=>{let a=new Date(e.updated_at||e.created_at);return new Date(s.updated_at||s.created_at)-a});I(s)}else I([])}catch(e){q(e.message)}finally{D(!1)}},B=e=>{y(e),n(!0)},U=e=>{y(e),b(!0)},$=e=>{let s=w.find(s=>s.id===e);s&&(y(e),S(s.stock),N(!0))},G=e=>{_(e),P(!0)},H=e=>{y(e),O(!0)};return(0,t.jsx)(j.A,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"titles",children:"ITEMS"})}),(0,t.jsxs)("div",{className:"almacen-header",children:[(0,t.jsx)("button",{onClick:()=>s(!0),className:"new-item-button",children:"Nuevo Item"}),(0,t.jsxs)("div",{className:"search-container",children:[(0,t.jsx)(i.g,{icon:l.MjD,className:"search-icon"}),(0,t.jsx)("input",{type:"text",className:"search-bar",placeholder:"Buscar...",value:A,onChange:e=>R(e.target.value)})]})]}),e&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("button",{onClick:()=>s(!1),className:"close-button",children:"\xd7"}),(0,t.jsx)(d,{onClose:()=>s(!1),onItemRegistered:L})]})}),a&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("button",{onClick:()=>n(!1),className:"close-button",children:"\xd7"}),(0,t.jsx)(m,{itemId:f,onClose:()=>n(!1),onItemUpdated:L})]})}),v&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("button",{onClick:()=>N(!1),className:"close-button",children:"\xd7"}),(0,t.jsx)(p,{item:w.find(e=>e.id===f),onClose:()=>N(!1),onItemAssigned:L})]})}),g&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("button",{onClick:()=>b(!1),className:"close-button",children:"\xd7"}),(0,t.jsx)(u,{itemId:f,onClose:()=>b(!1),onItemDeleted:L})]})}),T&&M&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("button",{onClick:()=>P(!1),className:"close-button",children:"\xd7"}),(0,t.jsx)(h,{item:M,onClose:()=>P(!1),onItemUpdated:L})]})}),z&&f&&(0,t.jsx)(x,{itemId:f,onClose:()=>O(!1)}),(0,t.jsx)("div",{className:"outerContainer",children:(0,t.jsx)("div",{className:"innerContainer",children:w.filter(e=>e.name.toLowerCase().includes(A.toLowerCase())||e.model.toLowerCase().includes(A.toLowerCase())||e.brand.toLowerCase().includes(A.toLowerCase())).map(e=>(0,t.jsx)(o,{item:e,onEdit:B,onDelete:U,onAssign:$,onAdd:G,onReport:H},e.id))})})]})})}},5373:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Ideapad\\\\OneDrive\\\\Documentos\\\\GitHub\\\\Deploy\\\\TornemecWebDeploy\\\\src\\\\app\\\\store\\\\page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Ideapad\\OneDrive\\Documentos\\GitHub\\Deploy\\TornemecWebDeploy\\src\\app\\store\\page.jsx","default")},5517:()=>{},1678:()=>{},5881:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[638,403,270,442,255,0],()=>a(371));module.exports=t})();