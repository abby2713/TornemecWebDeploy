(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{8304:(e,a,s)=>{Promise.resolve().then(s.bind(s,1939))},1939:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>x});var r=s(5155),n=s(2115),l=s(5370);s(1071);var t=s(3084),c=s(9757),i=s(5055);let o=e=>{let{machine:a,onDetail:s,onEdit:n,onDelete:l}=e,{id:o,name:m,brand:d,price:u,model:h}=a;return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"imageContainer",children:(0,r.jsx)("img",{src:"https://v14m7300-4000.brs.devtunnels.ms".concat(a.imageurl),alt:"Maquina",width:"300"})}),(0,r.jsxs)("div",{className:"details",children:[(0,r.jsx)("h3",{className:"title",children:m}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Marca: "}),d]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Precio: "}),(0,r.jsxs)("span",{className:"price",children:[u," Bs"]})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Modelo: "}),h]})]}),(0,r.jsxs)("div",{className:"form-buttons",children:[(0,r.jsxs)("button",{className:"form-button-primary",onClick:()=>s(o),children:[(0,r.jsx)(c.g,{icon:i.mEO})," Detalles"]}),(0,r.jsxs)("button",{className:"form-button-primary",onClick:()=>n(o),children:[(0,r.jsx)(c.g,{icon:i.MT7})," Editar"]}),(0,r.jsxs)("button",{className:"form-button-primary",onClick:()=>l(o),children:[(0,r.jsx)(c.g,{icon:i.BeE})," Eliminar"]})]})]}),(0,r.jsx)("div",{className:"qr-container",children:(0,r.jsxs)("div",{className:"product-data",children:[(0,r.jsx)(t.X,{id:"qr-".concat(o),value:"".concat(o),size:128,style:{marginBottom:"10px",display:"none"}}),(0,r.jsxs)("button",{className:"button",onClick:()=>{let e=document.getElementById("qr-".concat(o)).toDataURL("image/png"),a=document.createElement("a");a.href=e,a.download="machine-".concat(m,"-qr.png"),a.click()},children:[(0,r.jsx)(c.g,{icon:i.Yop})," Descargar"]})]})})]})};function m(e){var a,s;let{machineId:t,onClose:c}=e,[i,o]=(0,n.useState)({name:"",brand:"",model:"",description:"",serialNumber:"",year:"",statusmachine:"",voltage:"",phases:"",powerKW:"",price:"",categoryId:"",branchId:"",images:[]}),[m,d]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),[p,x]=(0,n.useState)(0);(0,n.useEffect)(()=>{let e=async()=>{try{let{status:e,data:a}=await (0,l.p9)();200===e&&h(a)}catch(e){console.error("Error al cargar las sucursales:",e)}};(async()=>{try{let{status:e,data:a}=await (0,l.bW)(1);200===e&&d(a)}catch(e){console.error("Error al cargar las categor\xedas:",e)}})(),e()},[]),(0,n.useEffect)(()=>{(async()=>{try{let{status:e,data:a}=await (0,l.B_)(t);if(200===e){let e=Array.isArray(a)?a[0]:a,s=e.images?e.images.map(e=>"https://v14m7300-4000.brs.devtunnels.ms".concat(e)):[];o({name:e.name||"",brand:e.brand||"",model:e.model||"",description:e.description||"",serialNumber:e.serialnumber||"",year:e.year||"",statusmachine:e.statusmachine||"",voltage:e.voltage||"",phases:e.phases||"",powerKW:e.powerkw||"",price:e.price||"",categoryId:e.categoryid||"",branchId:e.branchid||"",images:s}),x(0)}}catch(e){console.error("Error al cargar la m\xe1quina:",e)}})()},[t]);let j=(null===(a=m.find(e=>e.id===i.categoryId))||void 0===a?void 0:a.name)||"Categor\xeda no encontrada",f=(null===(s=u.find(e=>e.id===i.branchId))||void 0===s?void 0:s.name)||"Sucursal no encontrada";return(0,r.jsxs)("div",{className:"create-item-container",children:[(0,r.jsx)("h2",{className:"form-title",children:"DETALLES DE LA M\xc1QUINA"}),(0,r.jsxs)("div",{className:"form",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Nombre:"}),(0,r.jsx)("p",{className:"form-value",children:i.name})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Marca:"}),(0,r.jsx)("p",{className:"form-value",children:i.brand})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Modelo:"}),(0,r.jsx)("p",{className:"form-value",children:i.model})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"N\xfamero de Serie:"}),(0,r.jsx)("p",{className:"form-value",children:i.serialNumber})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"A\xf1o:"}),(0,r.jsx)("p",{className:"form-value",children:i.year})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Descripci\xf3n:"}),(0,r.jsx)("p",{className:"form-value",children:i.description})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Precio:"}),(0,r.jsx)("p",{className:"form-value",children:i.price})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Estado de Maquina:"}),(0,r.jsx)("p",{className:"form-value",children:i.statusmachine})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Voltaje:"}),(0,r.jsx)("p",{className:"form-value",children:i.voltage})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Fases:"}),(0,r.jsx)("p",{className:"form-value",children:i.phases})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Potencia (KW):"}),(0,r.jsx)("p",{className:"form-value",children:i.powerKW})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Categor\xeda:"}),(0,r.jsx)("p",{className:"form-value",children:j})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Sucursal:"}),(0,r.jsx)("p",{className:"form-value",children:f})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Im\xe1genes:"}),(0,r.jsx)("div",{className:"image-gallery",children:i.images.length>0?(0,r.jsxs)("div",{className:"image-container",children:[(0,r.jsx)("img",{src:i.images[p],alt:"Imagen ".concat(p+1),className:"machine-image",onClick:()=>{x(e=>e+1<i.images.length?e+1:0)},style:{cursor:"pointer"}}),(0,r.jsxs)("p",{className:"image-counter",children:[p+1," / ",i.images.length]})]}):(0,r.jsx)("p",{className:"form-value",children:"No hay im\xe1genes disponibles."})})]}),(0,r.jsx)("div",{className:"form-buttons",children:(0,r.jsx)("button",{type:"button",className:"form-button form-button-secondary",onClick:c,children:"Cerrar"})})]})]})}function d(e){let{onClose:a,onMachineRegistered:s}=e,[t,c]=(0,n.useState)({name:"",brand:"",model:"",description:"",serialNumber:"",year:"",statusmachine:"",voltage:"",phases:"",powerKW:"",price:"",branchId:"",categoryId:"",images:[]}),[i,o]=(0,n.useState)(!1),[m,d]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),[p,x]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=async()=>{try{let{status:e,data:a}=await (0,l.p9)();200===e&&h(a)}catch(e){console.error("Error al cargar las sucursales:",e)}finally{x(!1)}};(async()=>{try{let{status:e,data:a}=await (0,l.bW)(1);200===e&&d(a)}catch(e){console.error("Error al cargar las categor\xedas:",e)}finally{x(!1)}})(),e()},[]);let j=e=>{let{name:a,value:s}=e.target;c(e=>({...e,[a]:""===s?null:s}))},f=e=>{c(a=>({...a,images:a.images.filter((a,s)=>s!==e)}))},g=async e=>{e.preventDefault();let r=new FormData;Object.entries(t).forEach(e=>{let[a,s]=e;"images"!==a&&r.append(a,s)}),t.images.forEach(e=>{r.append("images",e.file)});try{let e=await (0,l.Op)(r);201===e.status?(alert("Registro exitoso"),s(),a()):alert("Hubo un error al registrar la m\xe1quina.")}catch(e){console.error("Error al enviar los datos:",e),alert("Hubo un error al enviar los datos.")}};return(0,r.jsxs)("div",{className:"create-item-container",children:[(0,r.jsx)("h2",{className:"form-title",children:"REGISTRO DE M\xc1QUINA"}),(0,r.jsxs)("form",{className:"form",onSubmit:g,children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsxs)("label",{className:"form-label",children:["Nombre: ",(0,r.jsx)("span",{className:"required",children:"*"})]}),(0,r.jsx)("input",{type:"text",name:"name",value:t.name,onChange:j,className:"form-input",required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsxs)("label",{className:"form-label",children:["Marca: ",(0,r.jsx)("span",{className:"required",children:"*"})]}),(0,r.jsx)("input",{type:"text",name:"brand",value:t.brand,onChange:j,className:"form-input"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Modelo:"}),(0,r.jsx)("input",{type:"text",name:"model",value:t.model,onChange:j,className:"form-input"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"N\xfamero de serie:"}),(0,r.jsx)("input",{type:"text",name:"serialNumber",value:t.serialNumber,onChange:j,className:"form-input"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"A\xf1o:"}),(0,r.jsx)("input",{type:"text",name:"year",value:t.year,onChange:j,className:"form-input"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Estado de M\xe1quina:"}),(0,r.jsxs)("select",{name:"statusmachine",value:t.statusmachine,onChange:j,className:"form-input",children:[(0,r.jsx)("option",{value:"",children:"Seleccione un estado"}),(0,r.jsx)("option",{value:"Activo",children:"Activo"}),(0,r.jsx)("option",{value:"Mantenimiento",children:"Mantenimiento"}),(0,r.jsx)("option",{value:"Descompuesto",children:"Descompuesto"}),(0,r.jsx)("option",{value:"Fuera de servicio",children:"Fuera de servicio"})]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Voltaje:"}),(0,r.jsx)("input",{type:"text",name:"voltage",value:t.voltage,onChange:j,className:"form-input"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Fases:"}),(0,r.jsx)("input",{type:"text",name:"phases",value:t.phases,onChange:j,className:"form-input"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Potencia (kW):"}),(0,r.jsx)("input",{type:"number",name:"powerKW",value:t.powerKW,onChange:j,className:"form-input"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsxs)("label",{className:"form-label",children:["Precio: ",(0,r.jsx)("span",{className:"required",children:"*"})]}),(0,r.jsx)("input",{type:"number",name:"price",value:t.price,onChange:j,className:"form-input",required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsxs)("label",{className:"form-label",children:["Categor\xeda: ",(0,r.jsx)("span",{className:"required",children:"*"})]}),(0,r.jsxs)("select",{name:"categoryId",value:t.categoryId,onChange:j,className:"form-select",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Selecciona una categor\xeda"}),m.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsxs)("label",{className:"form-label",children:["Sucursales: ",(0,r.jsx)("span",{className:"required",children:"*"})]}),(0,r.jsxs)("select",{name:"branchId",value:t.branchId,onChange:j,className:"form-select",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Selecciona una sucursal"}),u.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"\xbfTiene aditamentos extras?"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"radio",name:"hasAddition",value:"yes",checked:!0===i,onChange:()=>o(!0)}),"S\xed"]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"radio",name:"hasAddition",value:"no",checked:!1===i,onChange:()=>o(!1)}),"No"]})]})]}),i&&(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Descripci\xf3n:"}),(0,r.jsx)("textarea",{name:"description",value:t.description,onChange:j,className:"form-input"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Im\xe1genes:"}),(0,r.jsx)("input",{type:"file",name:"images",className:"form-input",accept:"image/*",onChange:e=>{let a=Array.from(e.target.files).map(e=>({file:e,url:URL.createObjectURL(e)}));c(e=>({...e,images:[...e.images,...a]}))},multiple:!0})]}),(0,r.jsx)("div",{className:"image-preview-container",children:t.images.map((e,a)=>(0,r.jsxs)("div",{className:"image-preview-item",children:[(0,r.jsx)("img",{src:e.url,alt:"Preview ".concat(a),className:"image-preview"}),(0,r.jsx)("button",{type:"button",className:"remove-image-button",onClick:()=>f(a),children:"X"})]},a))}),(0,r.jsxs)("div",{className:"form-buttons",children:[(0,r.jsx)("button",{type:"submit",className:"form-button form-button-primary",children:"Registrar"}),(0,r.jsx)("button",{type:"button",className:"form-button form-button-secondary",onClick:a,children:"Cancelar"})]})]})]})}function u(e){let{machineId:a,onClose:s,onMachineUpdated:t}=e,[c,i]=(0,n.useState)({name:"",brand:"",model:"",description:"",serialNumber:"",year:"",statusmachine:"",voltage:"",phases:"",powerKW:"",price:"",categoryId:"",branchId:""}),[o,m]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[h,p]=(0,n.useState)([]),[x,j]=(0,n.useState)([]),[f,g]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{let{status:e,data:s}=await (0,l.B_)(a);if(200===e){let e=Array.isArray(s)?s[0]:s;i({name:e.name||"",brand:e.brand||"",model:e.model||"",description:e.description||"",serialNumber:e.serialnumber||"",year:e.year||"",statusmachine:e.statusmachine||"",voltage:e.voltage||"",phases:e.phases||"",powerKW:e.powerkw||"",price:e.price||"",categoryId:e.categoryid||"",branchId:e.branchid||""}),p(e.images||[])}}catch(e){console.error("Error al cargar la m\xe1quina:",e)}})()},[a]),(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,l.bW)(1),a=await (0,l.p9)();200===e.status&&m(e.data),200===a.status&&u(a.data)}catch(e){console.error("Error al cargar opciones:",e)}})()},[]);let N=e=>{let{name:a,value:s}=e.target;i(e=>({...e,[a]:s}))},b=e=>{g(a=>a.filter((a,s)=>s!==e))},v=e=>{j(a=>[...a,e]),p(a=>a.filter(a=>a!==e))},y=async e=>{e.preventDefault();let r=new FormData;for(let e in c)r.append(e,c[e]);f.forEach(e=>r.append("images",e)),r.append("imagesToDelete",JSON.stringify(x));try{let e=await (0,l.te)(a,r);200===e.status||204===e.status?(alert("Actualizaci\xf3n exitosa"),t(),s()):alert("Error al actualizar la m\xe1quina: "+e.statusText)}catch(e){console.error("Error al actualizar los datos:",e),alert("Hubo un error al actualizar los datos.")}};return(0,r.jsxs)("div",{className:"create-item-container",children:[(0,r.jsx)("h2",{className:"form-title",children:"ACTUALIZAR M\xc1QUINA"}),(0,r.jsxs)("form",{className:"form",onSubmit:y,encType:"multipart/form-data",children:[Object.entries(c).map(e=>{let[a,s]=e;return"categoryId"!==a&&"branchId"!==a?(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsxs)("label",{className:"form-label",children:[a,":"]}),(0,r.jsx)("input",{type:"text",name:a,value:s,onChange:N,className:"form-input"})]},a):null}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Categor\xeda:"}),(0,r.jsxs)("select",{name:"categoryId",value:c.categoryId,onChange:N,className:"form-input",children:[(0,r.jsx)("option",{value:"",children:"Seleccione una categor\xeda"}),o.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Sucursal:"}),(0,r.jsxs)("select",{name:"branchId",value:c.branchId,onChange:N,className:"form-input",children:[(0,r.jsx)("option",{value:"",children:"Seleccione una sucursal"}),d.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Descripci\xf3n:"}),(0,r.jsx)("textarea",{name:"description",value:c.description,onChange:N,className:"form-input"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Im\xe1genes actuales:"}),(0,r.jsx)("div",{className:"image-preview-container",children:h.map(e=>(0,r.jsxs)("div",{className:"image-preview-item",children:[(0,r.jsx)("img",{src:"https://v14m7300-4000.brs.devtunnels.ms".concat(e),alt:"img",className:"preview-img",width:"100"}),(0,r.jsx)("button",{type:"button",className:"remove-image-button",onClick:()=>v(e),children:"X"})]},e))})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Agregar nuevas im\xe1genes:"}),(0,r.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{g(Array.from(e.target.files))}}),(0,r.jsx)("div",{className:"image-preview-container",children:f.map((e,a)=>(0,r.jsxs)("div",{className:"image-preview-item",children:[(0,r.jsx)("img",{src:URL.createObjectURL(e),alt:"preview-".concat(a),className:"preview-img",width:"100"}),(0,r.jsx)("button",{type:"button",className:"remove-image-button",onClick:()=>b(a),children:"X"})]},a))})]}),(0,r.jsxs)("div",{className:"form-buttons",children:[(0,r.jsx)("button",{type:"submit",className:"form-button form-button-primary",children:"Actualizar"}),(0,r.jsx)("button",{type:"button",className:"form-button form-button-secondary",onClick:s,children:"Cancelar"})]})]})]})}function h(e){let{machineId:a,onClose:s,onMachineDeleted:n}=e,t=async e=>{e.preventDefault();try{let e=await (0,l.Rn)(a);200===e.status||204===e.status?(alert("Registro Eliminado"),n(),s()):alert("Error al eliminar la m\xe1quina. C\xf3digo de estado: "+e.status)}catch(e){console.error("Error al eliminar la m\xe1quina:",e),alert("Error al eliminar la m\xe1quina. Ver la consola para m\xe1s detalles.")}};return(0,r.jsxs)("div",{className:"create-item-container",children:[(0,r.jsx)("h2",{className:"form-title",children:"\xbfDesea Eliminar el Registro?"}),(0,r.jsx)("form",{className:"form",onSubmit:t,children:(0,r.jsxs)("div",{className:"form-buttons",children:[(0,r.jsx)("button",{type:"submit",className:"form-button form-button-primary",children:"Aceptar"}),(0,r.jsx)("button",{type:"button",className:"form-button form-button-secondary",onClick:s,children:"Cancelar"})]})})]})}s(5527),s(5572);var p=s(4060);function x(){let[e,a]=(0,n.useState)(!1),[s,t]=(0,n.useState)(!1),[x,j]=(0,n.useState)(!1),[f,g]=(0,n.useState)(!1),[N,b]=(0,n.useState)(null),[v,y]=(0,n.useState)([]),[w,C]=(0,n.useState)(!0),[A,S]=(0,n.useState)(null),[E,k]=(0,n.useState)(""),I=async()=>{try{let e=await (0,l.F4)();if(e.data){let a=e.data.sort((e,a)=>e.id-a.id);y(a)}else y([])}catch(e){S(e.message)}finally{C(!1)}};(0,n.useEffect)(()=>{I()},[]);let R=e=>{b(e),g(!0)},D=e=>{b(e),t(!0)},q=e=>{b(e),j(!0)},M=v.filter(e=>e.name.toLowerCase().includes(E.toLowerCase())||e.brand.toLowerCase().includes(E.toLowerCase()));return(0,r.jsx)(p.A,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"titles",children:"MAQUINARIAS"})}),(0,r.jsxs)("div",{className:"almacen-header",children:[(0,r.jsx)("button",{onClick:()=>a(!0),className:"new-item-button",children:"Nueva Maquina"}),(0,r.jsxs)("div",{className:"search-container",children:[(0,r.jsx)(c.g,{icon:i.MjD,className:"search-icon"}),(0,r.jsx)("input",{type:"text",className:"search-bar",placeholder:"Buscar...",value:E,onChange:e=>k(e.target.value)})]})]}),e&&(0,r.jsx)("div",{className:"modal-overlay",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsx)("button",{onClick:()=>a(!1),className:"close-button",children:"\xd7"}),(0,r.jsx)(d,{onClose:()=>a(!1),onMachineRegistered:I})]})}),s&&(0,r.jsx)("div",{className:"modal-overlay",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsx)("button",{onClick:()=>t(!1),className:"close-button",children:"\xd7"}),(0,r.jsx)(u,{machineId:N,onClose:()=>t(!1),onMachineUpdated:I})]})}),f&&(0,r.jsx)("div",{className:"modal-overlay",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsx)("button",{onClick:()=>g(!1),className:"close-button",children:"\xd7"}),(0,r.jsx)(m,{machineId:N,onClose:()=>g(!1)})]})}),x&&(0,r.jsx)("div",{className:"modal-overlay",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsx)("button",{onClick:()=>j(!1),className:"close-button",children:"\xd7"}),(0,r.jsx)(h,{machineId:N,onClose:()=>j(!1),onMachineDeleted:I})]})}),(0,r.jsx)("div",{className:"outerContainer",children:(0,r.jsx)("div",{className:"innerContainer",children:M.map(e=>(0,r.jsx)(o,{machine:e,onDetail:R,onEdit:D,onDelete:q},e.id))})})]})})}},4060:(e,a,s)=>{"use strict";s.d(a,{A:()=>x});var r=s(5155),n=s(6046),l=s(2115),t=s(8173),c=s.n(t),i=s(9757),o=s(5055),m=s(5565);let d={src:"/_next/static/media/logo.3adaab63.png",height:100,width:100,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAARVBMVEX9/PzZdXj////9+fn55+hMaXHwz9D//////v7//f7svb/219v46On509X////RUlngkpXdgYb+8vPOTlX92dzVZGrprrIgseqOAAAADXRSTlMu+bXs/QD+rvH5/urq2zavewAAAAlwSFlzAAALEwAACxMBAJqcGAAAAD9JREFUeJwFwQkCgCAIAME1QdDCq+P/T20G5aj1QCE/IuFgke6RtuExxzu34/1bq/WMVSnFu8EZpckFirkb+gNMYwIfjEe+YgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8};s(3999);var u=s(6699),h=s.n(u);function p(e){let{children:a}=e,s=(0,n.usePathname)(),t=(0,n.useRouter)(),[u,p]=(0,l.useState)(""),[x,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=sessionStorage.getItem("name"),a=sessionStorage.getItem("lastname");e&&a&&p("".concat(e.toUpperCase()," ").concat(a.toUpperCase()))},[]);let f=()=>{window.innerWidth<768&&j(!1)};return(0,r.jsxs)("div",{className:"layout ".concat(h().className),children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsxs)("div",{className:"header-left",children:[(0,r.jsx)(i.g,{icon:o.ckx,className:"menu-icon",onClick:()=>j(!x)}),(0,r.jsx)(m.default,{src:d,alt:"Logo Tornemec",className:"logo"}),(0,r.jsxs)("span",{className:"company-name",children:["TORNEMEC",(0,r.jsx)("small",{children:" SRL"})]})]}),(0,r.jsxs)("div",{className:"header-right",children:[(0,r.jsx)("span",{className:"user-name",children:u}),(0,r.jsx)(i.g,{icon:o.X46,className:"icon"}),(0,r.jsxs)("div",{className:"logout-container",onClick:()=>{confirm("\xbfSeguro que deseas cerrar sesi\xf3n?")&&(sessionStorage.clear(),t.push("/"))},children:[(0,r.jsx)(i.g,{icon:o.GxD,className:"logout-icon"}),(0,r.jsx)("span",{className:"logout-text",children:"CERRAR SESI\xd3N"})]})]})]}),(0,r.jsxs)("div",{className:"content",children:[(0,r.jsx)("div",{className:"sidebar ".concat(x?"open":""),children:(0,r.jsx)("div",{className:"fixed",children:(0,r.jsx)("nav",{children:(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{className:"sidebar-item ".concat("/inventory"===s?"active":""),children:(0,r.jsxs)(c(),{href:"/inventory",onClick:f,children:[(0,r.jsx)(i.g,{icon:o.KTq,className:"iconSidebar"}),(0,r.jsx)("span",{children:"Inventario"})]})}),(0,r.jsx)("li",{className:"sidebar-item ".concat("/store"===s?"active":""),children:(0,r.jsxs)(c(),{href:"/store",onClick:f,children:[(0,r.jsx)(i.g,{icon:o.LJS,className:"iconSidebar"}),(0,r.jsx)("span",{children:"Almac\xe9n"})]})}),(0,r.jsx)("li",{className:"sidebar-item ".concat("/users"===s?"active":""),children:(0,r.jsxs)(c(),{href:"/users",onClick:f,children:[(0,r.jsx)(i.g,{icon:o.gdJ,className:"iconSidebar"}),(0,r.jsx)("span",{children:"Usuarios"})]})}),(0,r.jsx)("li",{className:"sidebar-item ".concat("/report"===s?"active":""),children:(0,r.jsxs)(c(),{href:"/report",onClick:f,children:[(0,r.jsx)(i.g,{icon:o.h8M,className:"iconSidebar"}),(0,r.jsx)("span",{children:"Reporte"})]})})]})})})}),(0,r.jsx)("div",{className:"main-content",children:a})]})]})}function x(e){let{children:a}=e,s=(0,n.usePathname)(),t=(0,n.useRouter)(),[c,i]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{sessionStorage.getItem("isAuthenticated")||"/"===s?i(!1):t.push("/")},[s,t]),c)?(0,r.jsx)("p",{children:"Cargando..."}):"/"===s?(0,r.jsx)(r.Fragment,{children:a}):(0,r.jsx)(p,{children:a})}},5370:(e,a,s)=>{"use strict";s.d(a,{$O:()=>I,B_:()=>w,Dv:()=>v,F4:()=>y,Gq:()=>j,JS:()=>x,LD:()=>N,O0:()=>k,Op:()=>C,RG:()=>q,Rn:()=>S,TK:()=>u,bW:()=>b,fk:()=>g,hG:()=>p,ik:()=>M,kg:()=>d,kl:()=>h,lX:()=>R,lo:()=>m,p9:()=>E,pr:()=>o,qZ:()=>D,te:()=>A,wE:()=>f});let r="https://v14m7300-4000.brs.devtunnels.ms";async function n(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(r,"/").concat(e);try{let e=await fetch(s,a),r=await e.json();return{status:e.status,data:r}}catch(e){throw console.error("Error en la solicitud:",e),e}}async function l(e){return n(e,{method:"GET"})}async function t(e,a){let s=a instanceof FormData;return n(e,{method:"POST",headers:s?void 0:{"Content-Type":"application/json"},body:s?a:JSON.stringify(a)})}async function c(e,a){let s=a instanceof FormData;return n(e,{method:"PUT",headers:s?void 0:{"Content-Type":"application/json"},body:s?a:JSON.stringify(a)})}async function i(e){return n(e,{method:"DELETE"})}async function o(e,a){return t("auth/login",{username:e,password:a})}async function m(){return l("activos")}async function d(e){return t("users",e)}let u=(e,a)=>{let s=a instanceof FormData;return fetch("".concat(r,"/users/").concat(e),{method:"PUT",headers:s?void 0:{"Content-Type":"application/json"},body:s?a:JSON.stringify(a)}).then(async e=>{let a=await e.json();if(!e.ok)throw Error(a.message||"Error al actualizar usuario");return{status:e.status,data:a}})},h=async e=>{let a=await fetch("https://v14m7300-4000.brs.devtunnels.ms/users/".concat(e));if(!a.ok)throw Error("No se pudo obtener el usuario");return a.json()};async function p(e){return i("users/".concat(e))}async function x(){return l("items")}async function j(e){return l("items/".concat(e))}async function f(e){return t("items",e)}async function g(e,a){return c("items/".concat(e),a)}async function N(e){return i("items/".concat(e))}async function b(e){return l("categories/".concat(e))}async function v(e){return l("stores/".concat(e))}async function y(){return l("machines")}async function w(e){return l("machines/".concat(e))}async function C(e){return t("machines",e)}async function A(e,a){return c("machines/".concat(e),a)}async function S(e){return i("machines/".concat(e))}async function E(){return l("branches")}async function k(){return l("roles")}let I=async e=>{let{userId:a,month:s,year:r,mode:n}=e,l=new URLSearchParams;a&&l.append("userId",a),s&&"month"===n&&l.append("month",s),r&&l.append("year",r),n&&l.append("mode",n);let t=await fetch("https://v14m7300-4000.brs.devtunnels.ms/api/transactions/report?".concat(l.toString()));if(!t.ok)throw Error("Error al obtener datos");return t.json()},R=async e=>{let a=await fetch("https://v14m7300-4000.brs.devtunnels.ms/api/transactions/report/item-movements?itemId=".concat(e));if(!a.ok)throw Error("No se pudo obtener el reporte de movimientos del \xedtem");return a.json()},D=async e=>{let{userId:a,month:s,year:n,codigoitem:l}=e,t=new URLSearchParams;a&&t.append("userId",a),s&&t.append("month",s),n&&t.append("year",n),l&&t.append("codigoitem",l);let c=await fetch("".concat(r,"/api/transactions/report/user-detailed?").concat(t.toString()));if(!c.ok)throw Error("No se pudo obtener el reporte detallado del usuario");return c.json()},q=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=new URLSearchParams(e).toString(),s=await fetch("https://v14m7300-4000.brs.devtunnels.ms/api/transactions/report/all-transactions?".concat(a));if(!s.ok)throw Error("No se pudo obtener el reporte completo");return s.json()},M=async(e,a,s,r,n)=>{let l=new URLSearchParams;a&&l.append("year",a),s&&l.append("month",s),r&&l.append("userid",r),n&&l.append("branchId",n);let t="https://v14m7300-4000.brs.devtunnels.ms/api/reportes/asignaciones/".concat(e,"?").concat(l.toString()),c=await fetch(t);if(!c.ok)throw Error("No se pudo obtener el reporte de asignaciones");return c.json()}},1071:()=>{},5572:()=>{},5527:()=>{},3999:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[777,79,266,738,803,84,441,517,358],()=>a(8304)),_N_E=e.O()}]);