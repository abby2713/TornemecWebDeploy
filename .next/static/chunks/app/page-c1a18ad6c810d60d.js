(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1950:(e,t,n)=>{Promise.resolve().then(n.bind(n,5590))},5590:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var r=n(5155),a=n(969),o=n.n(a),s=n(6046),i=n(2115),c=n(5370),l=n(5565);let u={src:"/_next/static/media/banner.9733a119.png",height:924,width:825,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAAPFBMVEWBe3ZcWFRvYVZYS0NlXl5BNS6dmJM7KipGQUBsamiUkY8wJCMaExF3Z2R4cmqRhXeekIhSPS5HPTK2vMHu1COwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAOUlEQVR4nAXBBwKAIAwAsQNaOpjq//9qAsF+3YnMqwRFb627E3M9RxalteZmjEovarjwiQ2S093mDzY2AaWGv2u0AAAAAElFTkSuQmCC",blurWidth:7,blurHeight:8};var p=n(3439),d=n.n(p),m=n(1536);function f(){let e=(0,s.useRouter)(),[t,n]=(0,i.useState)(""),[a,p]=(0,i.useState)(""),[f,h]=(0,i.useState)(""),[y,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{n(""),p(""),h(""),g(!1)},[]);let v=async n=>{if(n.preventDefault(),h(""),!t||!a){h("Usuario y contrase\xf1a son obligatorios.");return}try{g(!0);let n=await (0,c.pr)(t,a);200===n.status?(sessionStorage.setItem("isAuthenticated","true"),sessionStorage.setItem("userId",n.data.userId),sessionStorage.setItem("name",n.data.name),sessionStorage.setItem("lastname",n.data.lastname),e.push("/inventory")):h(n.data.message)}catch(e){var r,o;h((null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:r.message)||"Error al iniciar sesi\xf3n.")}finally{g(!1)}};return(0,r.jsx)("div",{className:o().container,children:(0,r.jsxs)("div",{className:o().loginBox,children:[(0,r.jsx)("div",{className:o().leftSide,children:(0,r.jsx)(l.default,{src:u,alt:"Banner",fill:!0,sizes:"(max-width: 768px) 100vw, 50vw",className:o().image,style:{objectFit:"cover"}})}),(0,r.jsxs)("div",{className:o().rightSide,children:[(0,r.jsx)("h2",{className:"".concat(o().loginTitle," ").concat(d().className),children:"INICIAR SESI\xd3N"}),f&&(0,r.jsx)("p",{className:o().errorMessage,children:f}),(0,r.jsxs)("form",{onSubmit:v,className:o().form,children:[(0,r.jsxs)("div",{className:o().inputWrapper,children:[(0,r.jsx)(m.x$1,{className:o().inputIcon}),(0,r.jsx)("input",{type:"text",placeholder:"Usuario",autoComplete:"username",autoFocus:!0,required:!0,className:o().inputField,value:t,onChange:e=>n(e.target.value)})]}),(0,r.jsxs)("div",{className:o().inputWrapper,children:[(0,r.jsx)(m.JhU,{className:o().inputIcon}),(0,r.jsx)("input",{type:"password",placeholder:"Contrase\xf1a",autoComplete:"current-password",required:!0,className:o().inputField,value:a,onChange:e=>p(e.target.value)})]}),(0,r.jsx)("button",{className:o().signInButton,type:"submit",disabled:y,children:y?"Cargando...":"INGRESAR"})]})]})]})})}},5370:(e,t,n)=>{"use strict";n.d(t,{$O:()=>I,B_:()=>_,Dv:()=>j,F4:()=>A,Gq:()=>y,JS:()=>h,LD:()=>b,O0:()=>x,Op:()=>O,RG:()=>P,Rn:()=>N,TK:()=>d,bW:()=>w,fk:()=>v,hG:()=>f,ik:()=>R,kg:()=>p,kl:()=>m,lX:()=>k,lo:()=>u,p9:()=>E,pr:()=>l,qZ:()=>C,te:()=>S,wE:()=>g});let r="https://v14m7300-4000.brs.devtunnels.ms";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(r,"/").concat(e);try{let e=await fetch(n,t),r=await e.json();return{status:e.status,data:r}}catch(e){throw console.error("Error en la solicitud:",e),e}}async function o(e){return a(e,{method:"GET"})}async function s(e,t){let n=t instanceof FormData;return a(e,{method:"POST",headers:n?void 0:{"Content-Type":"application/json"},body:n?t:JSON.stringify(t)})}async function i(e,t){let n=t instanceof FormData;return a(e,{method:"PUT",headers:n?void 0:{"Content-Type":"application/json"},body:n?t:JSON.stringify(t)})}async function c(e){return a(e,{method:"DELETE"})}async function l(e,t){return s("auth/login",{username:e,password:t})}async function u(){return o("activos")}async function p(e){return s("users",e)}let d=(e,t)=>{let n=t instanceof FormData;return fetch("".concat(r,"/users/").concat(e),{method:"PUT",headers:n?void 0:{"Content-Type":"application/json"},body:n?t:JSON.stringify(t)}).then(async e=>{let t=await e.json();if(!e.ok)throw Error(t.message||"Error al actualizar usuario");return{status:e.status,data:t}})},m=async e=>{let t=await fetch("https://v14m7300-4000.brs.devtunnels.ms/users/".concat(e));if(!t.ok)throw Error("No se pudo obtener el usuario");return t.json()};async function f(e){return c("users/".concat(e))}async function h(){return o("items")}async function y(e){return o("items/".concat(e))}async function g(e){return s("items",e)}async function v(e,t){return i("items/".concat(e),t)}async function b(e){return c("items/".concat(e))}async function w(e){return o("categories/".concat(e))}async function j(e){return o("stores/".concat(e))}async function A(){return o("machines")}async function _(e){return o("machines/".concat(e))}async function O(e){return s("machines",e)}async function S(e,t){return i("machines/".concat(e),t)}async function N(e){return c("machines/".concat(e))}async function E(){return o("branches")}async function x(){return o("roles")}let I=async e=>{let{userId:t,month:n,year:r,mode:a}=e,o=new URLSearchParams;t&&o.append("userId",t),n&&"month"===a&&o.append("month",n),r&&o.append("year",r),a&&o.append("mode",a);let s=await fetch("https://v14m7300-4000.brs.devtunnels.ms/api/transactions/report?".concat(o.toString()));if(!s.ok)throw Error("Error al obtener datos");return s.json()},k=async e=>{let t=await fetch("https://v14m7300-4000.brs.devtunnels.ms/api/transactions/report/item-movements?itemId=".concat(e));if(!t.ok)throw Error("No se pudo obtener el reporte de movimientos del \xedtem");return t.json()},C=async e=>{let{userId:t,month:n,year:a,codigoitem:o}=e,s=new URLSearchParams;t&&s.append("userId",t),n&&s.append("month",n),a&&s.append("year",a),o&&s.append("codigoitem",o);let i=await fetch("".concat(r,"/api/transactions/report/user-detailed?").concat(s.toString()));if(!i.ok)throw Error("No se pudo obtener el reporte detallado del usuario");return i.json()},P=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString(),n=await fetch("https://v14m7300-4000.brs.devtunnels.ms/api/transactions/report/all-transactions?".concat(t));if(!n.ok)throw Error("No se pudo obtener el reporte completo");return n.json()},R=async(e,t,n,r,a)=>{let o=new URLSearchParams;t&&o.append("year",t),n&&o.append("month",n),r&&o.append("userid",r),a&&o.append("branchId",a);let s="https://v14m7300-4000.brs.devtunnels.ms/api/reportes/asignaciones/".concat(e,"?").concat(o.toString()),i=await fetch(s);if(!i.ok)throw Error("No se pudo obtener el reporte de asignaciones");return i.json()}},969:e=>{e.exports={container:"login_container__I6N6n",loginBox:"login_loginBox__mo1yp",fadeIn:"login_fadeIn__CeVrm",leftSide:"login_leftSide__5xd3C",rightSide:"login_rightSide__7mZ9z",loginTitle:"login_loginTitle__l5db5",form:"login_form__63hIg",inputWrapper:"login_inputWrapper__S1OEk",inputIcon:"login_inputIcon__liYVw",inputField:"login_inputField__2yA_l",errorMessage:"login_errorMessage__jeRLt",signInButton:"login_signInButton__an1N1"}},3439:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d6db35"}},3435:(e,t,n)=>{"use strict";n.d(t,{k5:()=>u});var r=n(2115),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=r.createContext&&r.createContext(a),s=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){var r,a;r=t,a=n[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e){return t=>r.createElement(p,i({attr:l({},e.attr)},t),function e(t){return t&&t.map((t,n)=>r.createElement(t.tag,l({key:n},t.attr),e(t.child)))}(e.child))}function p(e){var t=t=>{var n,{attr:a,size:o,title:c}=e,u=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,s),p=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,u,{className:n,style:l(l({color:e.color||t.color},t.style),e.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),c&&r.createElement("title",null,c),e.children)};return void 0!==o?r.createElement(o.Consumer,null,e=>t(e)):t(a)}}},e=>{var t=t=>e(e.s=t);e.O(0,[201,711,738,441,517,358],()=>t(1950)),_N_E=e.O()}]);